<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Moneda Pikachu 🪙⚡</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body {
    background: linear-gradient(135deg, #fff580, #ffd23f);
    font-family: 'Comic Sans MS', cursive;
  }
  .coin {
    width: 200px;
    height: 200px;
    position: relative;
    transform-style: preserve-3d;
    transition: transform 5s cubic-bezier(0.22, 1, 0.36, 1);
    margin: 0 auto;
  }
  .side {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    backface-visibility: hidden;
    background-size: cover;
    background-position: center;
  }
  .front {
    background-image: url('img/cara-pikachu.png');
  }
  .back {
    background-image: url('img/sello-pikachu.png');
    transform: rotateY(180deg);
  }
  #resultado, #resultadoFinal {
    text-align: center;
    transition: all 0.5s ease-in-out;
  }
  #resultadoFinal {
    font-size: 2rem;
    font-weight: bold;
    margin-top: 10px;
  }
</style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen">

  <h1 class="text-4xl font-bold text-yellow-800 mb-4">Moneda Pikachu 🪙⚡</h1>

  <div class="coin" id="coin">
    <div class="side front"></div>
    <div class="side back"></div>
  </div>

  <div class="mt-8 text-center">
    <p id="resultado" class="text-2xl font-bold text-yellow-800 mb-2"></p>
    <p id="resultadoFinal" class="text-yellow-800"></p>
  </div>

  <div class="flex flex-wrap justify-center gap-4 mt-6">
    <button id="caraBtn" class="px-6 py-3 bg-yellow-600 text-white font-bold rounded-2xl shadow hover:bg-yellow-300 transition">
      Cara ⚡
    </button>
    <button id="selloBtn" class="px-6 py-3 bg-yellow-600 text-white font-bold rounded-2xl shadow hover:bg-amber-400 transition">
      Sello 💤
    </button>
    <button id="lanzarBtn" class="px-6 py-3 bg-yellow-600 text-white font-bold rounded-2xl shadow-lg hover:bg-yellow-500 transition">
      Lanzar 🪙
    </button>
  </div>

<script>
let eleccion = null;
const coin = document.getElementById('coin');
const resultado = document.getElementById('resultado');
const resultadoFinal = document.getElementById('resultadoFinal');
const caraBtn = document.getElementById('caraBtn');
const selloBtn = document.getElementById('selloBtn');
const lanzarBtn = document.getElementById('lanzarBtn');

// 🎵 Sonidos
const sonidoGiro = new Audio('mp3/giro.mp3');
const sonidoResultado = new Audio('mp3/resultado.mp3');

caraBtn.onclick = () => {
  eleccion = 'cara';
  caraBtn.classList.add('ring-4', 'ring-yellow-500');
  selloBtn.classList.remove('ring-4', 'ring-yellow-500');
  resultado.textContent = 'Has elegido CARA ⚡';
  resultadoFinal.textContent = '';
};

selloBtn.onclick = () => {
  eleccion = 'sello';
  selloBtn.classList.add('ring-4', 'ring-yellow-500');
  caraBtn.classList.remove('ring-4', 'ring-yellow-500');
  resultado.textContent = 'Has elegido SELLO 💤';
  resultadoFinal.textContent = '';
};

lanzarBtn.onclick = () => {
  if (!eleccion) {
    resultado.textContent = 'Primero elige CARA o SELLO ⚠️';
    return;
  }

  resultado.textContent = 'Lanzando... 🌀';
  resultadoFinal.textContent = '';

  coin.style.transition = 'none';
  coin.style.transform = 'rotateY(0deg)';
  void coin.offsetWidth;
  coin.style.transition = 'transform 5s cubic-bezier(0.22, 1, 0.36, 1)';

  sonidoGiro.currentTime = 0;
  sonidoGiro.play();

  const esCara = Math.random() < 0.5;
  const resultadoReal = esCara ? 'cara' : 'sello';
  const vueltas = 6;
  const anguloFinal = vueltas * 360 + (esCara ? 0 : 180);

  coin.style.transform = `rotateY(${anguloFinal}deg)`;

  setTimeout(() => {
    sonidoGiro.pause();
    sonidoResultado.currentTime = 0;
    sonidoResultado.play();

    const gano = resultadoReal === eleccion;
    resultado.textContent = gano ? '¡Ganaste! ⚡' : 'Perdiste 😅';
    resultadoFinal.textContent = `Salió ${resultadoReal.toUpperCase()} ${
      esCara ? '⚡' : '💤'
    }`;

    resultadoFinal.style.color = esCara ? '#ca8a04' : '#78350f';
    resultadoFinal.style.transform = 'scale(1.3)';
    setTimeout(() => (resultadoFinal.style.transform = 'scale(1)'), 400);
  }, 5000);
};
</script>

</body>
</html>
