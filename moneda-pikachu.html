<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Moneda Pikachu 🪙⚡</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body {
    background: linear-gradient(135deg, #fff580, #ffd23f);
    font-family: 'Comic Sans MS', cursive;
  }
  .coin {
    width: 200px;
    height: 200px;
    position: relative;
    transform-style: preserve-3d;
    transition: transform 1s;
    margin: 0 auto;
  }
  .side {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    backface-visibility: hidden;
    background-size: cover;
    background-position: center;
    border: 6px solid #facc15;
    box-shadow: 0 0 20px rgba(255, 230, 0, 0.6);
  }
  .front {
    background-image: url('img/cara-pikachu.png'); /* Imagen de cara */
  }
  .back {
    background-image: url('img/sello-pikachu.png'); /* Imagen de sello */
    transform: rotateY(180deg);
  }
  .flip {
    transform: rotateY(1800deg);
  }
</style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen">

  <h1 class="text-4xl font-bold text-yellow-800 mb-4">Moneda Pikachu 🪙⚡</h1>
  <p class="text-lg text-yellow-900 mb-6 text-center">Elige <strong>cara</strong> o <strong>sello</strong> y lanza la moneda.</p>

  <div class="coin" id="coin">
    <div class="side front"></div>
    <div class="side back"></div>
  </div>

  <div class="flex gap-4 mt-8">
    <button id="caraBtn" class="px-6 py-3 bg-yellow-600 text-white font-bold rounded-2xl shadow hover:bg-yellow-300 transition">Cara ⚡</button>
    <button id="selloBtn" class="px-6 py-3 bg-yellow-600 text-white font-bold rounded-2xl shadow hover:bg-amber-400 transition">Sello 💤</button>
  </div>

  <button id="lanzarBtn" class="mt-6 px-8 py-3 bg-yellow-600 text-white font-bold rounded-2xl shadow-lg hover:bg-yellow-500 transition">Lanzar Moneda 🪙</button>

  <p id="resultado" class="mt-8 text-2xl font-bold text-yellow-800"></p>

<!-- Modal de resultado -->
<div id="modalResultado" class="hidden fixed inset-0 bg-black/60 flex items-center justify-center z-50">
  <div class="bg-yellow-100 rounded-2xl shadow-2xl p-8 text-center w-80 border-4 border-yellow-400">
    <h2 id="tituloModal" class="text-3xl font-bold text-yellow-800 mb-4">¡Ganaste! ⚡</h2>
    <p id="mensajeModal" class="text-lg text-yellow-900 mb-6">Salió CARA 😄</p>
    <button id="btnAceptar" class="px-6 py-2 bg-yellow-500 hover:bg-yellow-400 text-yellow-900 font-bold rounded-xl shadow">
      Aceptar
    </button>
  </div>
</div>

<script>
let eleccion = null;
const coin = document.getElementById('coin');
const resultado = document.getElementById('resultado');
const caraBtn = document.getElementById('caraBtn');
const selloBtn = document.getElementById('selloBtn');
const lanzarBtn = document.getElementById('lanzarBtn');

const modal = document.getElementById('modalResultado');
const tituloModal = document.getElementById('tituloModal');
const mensajeModal = document.getElementById('mensajeModal');
const btnAceptar = document.getElementById('btnAceptar');

// 🎵 Cargar sonidos
const sonidoGiro = new Audio('mp3/giro.mp3');
const sonidoResultado = new Audio('mp3/resultado.mp3');

caraBtn.onclick = () => {
  eleccion = 'cara';
  caraBtn.classList.add('ring-4', 'ring-yellow-500');
  selloBtn.classList.remove('ring-4', 'ring-yellow-500');
  resultado.textContent = 'Has elegido CARA ⚡';
};

selloBtn.onclick = () => {
  eleccion = 'sello';
  selloBtn.classList.add('ring-4', 'ring-yellow-500');
  caraBtn.classList.remove('ring-4', 'ring-yellow-500');
  resultado.textContent = 'Has elegido SELLO 💤';
};

lanzarBtn.onclick = () => {
  if (!eleccion) {
    resultado.textContent = 'Primero elige CARA o SELLO ⚠️';
    return;
  }

  // Reiniciar moneda
  coin.style.transition = 'none';
  coin.style.transform = 'rotateY(0deg)';
  void coin.offsetWidth;
  coin.style.transition = 'transform 1.5s ease-out';

  resultado.textContent = 'Lanzando... 🌀';

  // 🔊 Reproducir sonido de giro
  sonidoGiro.currentTime = 0;
  sonidoGiro.play();

  // Vueltas aleatorias
  const vueltas = Math.floor(Math.random() * 5) + 5;
  const esCara = Math.random() < 0.5;
  const anguloFinal = vueltas * 180 + (esCara ? 0 : 180);

  coin.style.transform = `rotateY(${anguloFinal}deg)`;

  setTimeout(() => {
    const resultadoFinal = esCara ? 'cara' : 'sello';
    const gano = resultadoFinal === eleccion;

    // 🔊 Reproducir sonido de resultado
    sonidoResultado.currentTime = 0;
    sonidoResultado.play();

    // Mostrar modal
    tituloModal.textContent = gano ? '¡Ganaste! ⚡' : 'Perdiste 😅';
    tituloModal.className = gano
      ? 'text-3xl font-bold text-yellow-800 mb-4'
      : 'text-3xl font-bold text-red-700 mb-4';
    mensajeModal.textContent = `Salió ${resultadoFinal.toUpperCase()}`;
    modal.classList.remove('hidden');
  }, 1600);
};

// Cerrar modal y reiniciar todo
btnAceptar.onclick = () => {
  modal.classList.add('hidden');
  resultado.textContent = '';
  eleccion = null;
  caraBtn.classList.remove('ring-4', 'ring-yellow-500');
  selloBtn.classList.remove('ring-4', 'ring-yellow-500');
  coin.style.transform = 'rotateY(0deg)';
};
</script>

</body>
</html>
